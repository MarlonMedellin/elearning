---
import { Icon } from 'astro-icon/components';

const navItems = [
  { name: 'Inicio', href: '/' },
  { name: 'Perfiles', href: '/#perfiles' },
  { name: 'Horizonte', href: '/#horizonte' },
  { name: 'Admisiones', href: '/admisiones' },
  { name: 'Vida Institucional', href: '/vida-institucional' },
  { name: 'Comunicaciones', href: '/circulares' },
  { name: 'Contacto', href: '/contact' },
];

const { pathname } = Astro.url;
---

<nav class="sticky top-0 z-40 w-full bg-white shadow-md">
    <div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-0 sm:px-6 lg:px-8">
        <!-- Logo -->
        <a href="/" class="flex h-16 items-center gap-3 px-4 group">
            <Icon name="lucide:book-open" class="h-8 w-8 text-primary group-hover:scale-110 transition-transform" />
            <h2 class="m-0 text-xl font-bold text-primary sm:text-2xl tracking-tight">IE Capilla del Rosario</h2>
        </a>

        <!-- Desktop Navigation -->
        <div class="hidden lg:flex items-center h-full">
            {navItems.map((item) => (
                <a
                    href={item.href}
                    class={`relative flex h-16 items-center px-4 text-xs font-bold uppercase tracking-wider transition-colors hover:text-primary ${
                        (pathname === item.href || (item.href !== '/' && pathname.startsWith(item.href))) 
                        ? 'text-primary after:absolute after:bottom-0 after:left-0 after:h-1 after:w-full after:bg-primary' 
                        : 'text-brand-dark hover:bg-brand-light/20'
                    }`}
                >
                    {item.name}
                </a>
            ))}
        </div>

        <!-- Mobile Menu Button -->
        <button id="mobile-menu-button" type="button" class="lg:hidden p-4 text-brand-dark hover:text-primary transition-colors">
            <Icon name="lucide:menu" class="h-6 w-6" />
        </button>
    </div>

    <!-- Mobile Navigation -->
    <div id="mobile-menu" class="hidden border-t border-gray-100 lg:hidden bg-white">
        <div class="flex flex-col space-y-1 p-4">
            {navItems.map((item) => (
                <a
                    href={item.href}
                    class={`px-4 py-3 text-sm font-bold uppercase tracking-wide rounded-xl transition-colors ${
                        pathname === item.href ? 'bg-primary text-white' : 'text-brand-dark hover:bg-brand-light'
                    }`}
                >
                    {item.name}
                </a>
            ))}
        </div>
    </div>
</nav>

<script is:inline>
    const btn = document.getElementById('mobile-menu-button');
    const menu = document.getElementById('mobile-menu');

    btn?.addEventListener('click', () => {
        menu?.classList.toggle('hidden');
    });
</script>
