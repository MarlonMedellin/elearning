---
import MainLayout from "../layouts/MainLayout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import PageHeader from "../components/PageHeader.astro";
import SectionHeader from "../components/SectionHeader.astro";
import CircularsTable from "../components/CircularsTable.astro";
import { Icon } from "astro-icon/components";
---

<MainLayout
  title="Comunicaciones"
  description="Acceda a las circulares oficiales y comunicados de la Institución. Manténgase informado sobre procesos académicos, convivenciales y administrativos mensuales."
>
  <Navbar />
  <PageHeader title="Comunicaciones" />

  <main class="py-20">
    <section class="container mx-auto px-4 lg:px-8">
      <!-- Noticia Importante: Master2000 -->
      <div
        class="bg-gradient-to-br from-brand-light/20 to-white rounded-2xl shadow-sm border border-brand-light/50 p-6 md:p-10 mb-16 relative overflow-hidden"
      >
        <div class="absolute top-0 right-0 p-8 opacity-5">
          <Icon name="lucide:megaphone" class="w-32 h-32 text-primary" />
        </div>

        <div class="relative z-10">
          <div
            class="inline-flex items-center gap-2 px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-semibold mb-6"
          >
            <Icon name="lucide:bell" class="w-4 h-4" /> Noticia Importante
          </div>

          <h2 class="text-2xl md:text-3xl font-bold text-brand-dark mb-4">
            ¡Estrenamos un nuevo y moderno sistema académico!
          </h2>

          <p class="text-gray-700 text-lg mb-6 leading-relaxed">
            Nos emociona anunciar que nuestra institución educativa ha comenzado
            a utilizar el sistema de GMA Digital (creadores de la plataforma
            Master 2000), una herramienta colombiana con más de 25 años de
            experiencia apoyando a los colegios. Este cambio nos permitirá
            organizar mejor nuestra información y estar más conectados.
          </p>

          <h3 class="text-xl font-bold text-brand-dark mb-4 drop-shadow-sm">
            Aquí te contamos las principales bondades de este nuevo sistema para
            todos:
          </h3>

          <ul class="space-y-4 mb-8">
            <li class="flex items-start gap-3">
              <div
                class="mt-1 flex-shrink-0 w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600"
              >
                <Icon name="lucide:check" class="w-4 h-4" />
              </div>
              <p class="text-gray-700 leading-relaxed">
                <strong>Para los estudiantes y padres de familia:</strong> La plataforma
                hace que la gestión de los procesos educativos de sus hijos sea más
                sencilla, garantiza mayor bienestar y seguridad a través de su sistema
                de convivencia escolar y un control de asistencia por cada clase.
                Padres y estudiantes, pueden consultar las notas de manera permanente.
              </p>
            </li>
            <li class="flex items-start gap-3">
              <div
                class="mt-1 flex-shrink-0 w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-blue-600"
              >
                <Icon name="lucide:check" class="w-4 h-4" />
              </div>
              <p class="text-gray-700 leading-relaxed">
                <strong>Para los docentes:</strong> Facilita mucho el trabajo del
                día a día, ya que ayuda a administrar y sistematizar toda la información
                académica de forma rápida y ordenada.
              </p>
            </li>
            <li class="flex items-start gap-3">
              <div
                class="mt-1 flex-shrink-0 w-6 h-6 rounded-full bg-purple-100 flex items-center justify-center text-purple-600"
              >
                <Icon name="lucide:check" class="w-4 h-4" />
              </div>
              <p class="text-gray-700 leading-relaxed">
                <strong>Para la comunidad y la institución:</strong> Nos permite tener
                un colegio más moderno y eficiente.
              </p>
            </li>
          </ul>

          <div
            class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-6 border-t border-gray-100 pt-6"
          >
            <a
              href="https://login.master2000.net/ingreso/?A=105001008486&&"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center gap-2 bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-xl font-bold transition-colors shadow-md hover:shadow-lg"
            >
              <Icon name="lucide:external-link" class="w-5 h-5" />
              Ingresar al Sistema
            </a>

            <div class="flex flex-col sm:items-end gap-2">
              <span
                class="text-sm font-semibold text-gray-500 uppercase tracking-wider"
                >Compartir noticia</span
              >
              <div class="flex flex-wrap gap-2">
                <!-- WhatsApp -->
                <button
                  data-share-wa=""
                  class="inline-flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors text-sm font-semibold"
                  aria-label="Compartir en WhatsApp"
                >
                  <svg
                    width="1em"
                    height="1em"
                    class="w-4 h-4"
                    data-icon="lucide:message-circle"
                  >
                    <symbol id="ai:lucide:message-circle" viewBox="0 0 24 24"
                      ><path
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092a10 10 0 1 0-4.777-4.719"
                      ></path></symbol
                    ><use href="#ai:lucide:message-circle"></use>
                  </svg>
                  WhatsApp
                </button>
                <!-- Copy Link -->
                <button
                  data-share-copy=""
                  class="inline-flex items-center gap-2 px-4 py-2 bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors text-sm font-semibold group relative"
                  aria-label="Copiar enlace"
                >
                  <svg
                    width="1em"
                    height="1em"
                    class="w-4 h-4"
                    data-icon="lucide:link"
                  >
                    <symbol id="ai:lucide:link" viewBox="0 0 24 24"
                      ><g
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        ><path
                          d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
                        ></path><path
                          d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
                        ></path></g
                      ></symbol
                    ><use href="#ai:lucide:link"></use>
                  </svg>
                  <span class="group-data-[copied=true]:hidden"
                    >Copiar Enlace</span
                  >
                  <span
                    class="hidden group-data-[copied=true]:inline text-green-600"
                    >¡Copiado!</span
                  >
                </button>
                <!-- Native Share (Mobile) -->
                <button
                  data-share-native=""
                  class="lg:hidden inline-flex items-center gap-2 px-4 py-2 bg-brand-light/10 text-brand-dark rounded-lg hover:bg-brand-light/20 transition-colors text-sm font-semibold"
                  aria-label="Más opciones"
                >
                  <svg
                    width="1em"
                    height="1em"
                    class="w-4 h-4"
                    data-icon="lucide:share-2"
                  >
                    <symbol id="ai:lucide:share-2" viewBox="0 0 24 24"
                      ><g
                        fill="none"
                        stroke="currentColor"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        ><circle cx="18" cy="5" r="3"></circle><circle
                          cx="6"
                          cy="12"
                          r="3"></circle><circle cx="18" cy="19" r="3"
                        ></circle><path
                          d="m8.59 13.51l6.83 3.98m-.01-10.98l-6.82 3.98"
                        ></path></g
                      ></symbol
                    ><use href="#ai:lucide:share-2"></use>
                  </svg>
                  Más
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <SectionHeader subtitle="Institucional" title="Circulares Oficiales" />
      <div class="mt-8">
        <CircularsTable />
      </div>

      <div class="mt-20 p-8 bg-gray-50 rounded-2xl border border-gray-100">
        <h3
          class="text-xl font-bold text-brand-dark mb-4 flex items-center gap-2"
        >
          <Icon name="lucide:info" class="text-primary h-6 w-6" /> Información Importante
        </h3>
        <p class="text-gray-600 text-base leading-relaxed">
          Las circulares son publicadas mensualmente para mantener informada a
          la comunidad educativa sobre procesos académicos, convivenciales y
          administrativos. Si tiene dificultades para visualizar algún
          documento, por favor comuníquese con la secretaría institucional.
        </p>
      </div>
    </section>
  </main>

  <Footer />

  <script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
      const url = window.location.href;
      const title =
        "¡Noticia Importante: Estrenamos un nuevo y moderno sistema académico!";

      // WhatsApp
      document.querySelectorAll("[data-share-wa]").forEach((btn) => {
        btn.addEventListener("click", () => {
          const waUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(
            title + " " + url,
          )}`;
          window.open(waUrl, "_blank");
        });
      });

      // Copy Link
      document.querySelectorAll("[data-share-copy]").forEach((btn) => {
        btn.addEventListener("click", () => {
          navigator.clipboard.writeText(url).then(() => {
            btn.dataset.copied = "true";
            setTimeout(() => {
              delete btn.dataset.copied;
            }, 2000);
          });
        });
      });

      // Native Share
      document.querySelectorAll("[data-share-native]").forEach((btn) => {
        btn.addEventListener("click", () => {
          if (navigator.share) {
            navigator.share({
              title: title,
              url: url,
            });
          }
        });
      });
    });
  </script>
</MainLayout>
